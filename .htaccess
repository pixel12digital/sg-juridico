# BEGIN WordPress
<IfModule mod_rewrite.c>
RewriteEngine On

# SEGURANÇA: Bloquear acesso a arquivos de debug/teste em produção
RewriteRule ^(teste-|debug-|fix-|test-|verificar-|phpinfo|ok\.php|simple) - [F,L]

# SEGURANÇA: Bloquear acesso a arquivos de backup
RewriteRule \.(bak|backup|old|sql|zip)$ - [F,L]

# CRÍTICO: Não processar index.php novamente
RewriteRule ^index\.php$ - [L]

# CRÍTICO: Servir arquivos que existem fisicamente SEM redirecionamento
RewriteCond %{REQUEST_FILENAME} -f
RewriteRule ^ - [L]

# CRÍTICO: Servir diretórios que existem fisicamente SEM redirecionamento  
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule ^ - [L]

# Apenas redirecionar para WordPress se arquivo NÃO existe
# Detectar ambiente e usar caminho correto dinamicamente
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d

# Se for localhost, usar /sg-juridico/index.php
RewriteCond %{HTTP_HOST} ^localhost [OR]
RewriteCond %{HTTP_HOST} ^127\.0\.0\.1 [OR]
RewriteCond %{HTTP_HOST} ^.*\.local
RewriteRule ^(.*)$ /sg-juridico/index.php [L]

# Senão, usar /index.php (raiz - produção)
RewriteRule ^(.*)$ /index.php [L]
</IfModule>
# END WordPress
